\chapter{ARKAPLAN ÖZETİ} \label{chap:background}

Bu bölümde, çalışmada kullanılan sensörler kısaca tanıtılmakta, derinlik algısının temel prensipleri özetlenmekte ve Papoulis–Gerchberg algoritmasının temelelleri açıklanmaktadır. Böylece, ilerleyen bölümlerde ayrıntılı olarak sunulan yöntem için kavramsal bir altyapı oluşturulması amaçlanmaktadır.

\section{Sensörler}

Bu çalışmanın temelini, yoğun fakat gürültülü derinlik bilgisi sağlayan \textbf{stereo kamera} ile seyrek fakat yüksek hassasiyetli ölçümler sunan \textbf{LiDAR} sensörünün birlikte kullanımı oluşturmaktadır. Deneysel doğrulama aşamasında ise \textbf{IMU} ve \textbf{GNSS/RTK} verileri de yardımcı sensörler olarak kullanılmıştır.

\subsection{Stereo Kamera}

Stereo kamera sistemi, birbirine paralel ve aralarında sabit bir taban mesafesi (\emph{baseline}) bulunan iki kameradan oluşur. Her iki kameradan elde edilen görüntüler arasındaki yatay piksel kayması, yani \emph{parallaks} ya da \emph{disparite}, derinlik bilgisinin temel kaynağıdır. Kamera kalibrasyonu sonrasında odak uzaklığı $f$ ve taban mesafesi $B$ bilindiğinde, bir pikselin disparitesi $d$ kullanılarak sahnedeki karşılık gelen noktanın derinliği $Z$ yaklaşık olarak
\begin{equation}
    Z = \frac{f \, B}{d}
\end{equation}
ilişkisi ile hesaplanabilir.

Pratikte stereo eşleştirme algoritmalarının; doku eksikliği, tekrarlayan desenler, perspektif bozulmalar ve görüntü gürültüsü gibi nedenlerle özellikle kenar bölgelerinde ve uzak mesafelerde hataya açık olduğu bilinmektedir. Bu durum, stereo kameradan elde edilen derinlik haritalarının \emph{yoğun} olmasına rağmen \emph{yüksek doğrulukta olmamasına} yol açar. Öte yandan, tutarlı bir görüntü geometrisi sunduğu için nesne algısı oluşturmada etkilidir.

\subsection{LiDAR}

LiDAR (Light Detection and Ranging), ortama gönderdiği lazer ışınlarının gidiş–dönüş süresini ölçerek mesafe tahmini yapan bir zaman–uçuş (Time-of-Flight) sensörüdür. Lazer kaynağından çıkan ışının sensörden hedefe gidip tekrar alıcıya dönmesi için geçen süre $t$ ölçüldüğünde, hedefe olan uzaklık $R$ aşağıdaki şekilde hesaplanır:
\begin{equation}\label{TOF}
    R = \frac{c \, t}{2}
\end{equation}
burada $c$ ışık hızıdır.

Mekanik taramalı 3B LiDAR sistemlerinde, birden fazla lazer–alıcı çifti belirli yükseklik açıları ile şaft üzerine yerleştirilir ve şaftın döndürülmesiyle 360° azimut boyunca tarama yapılır. Elde edilen bir tam tarama \emph{çerçeve} (frame) olarak adlandırılır ve her çerçeve, LiDAR merkezli küresel koordinat sisteminde $R$, yatay açı $\alpha$ ve dikey açı $\omega$ ile ifade edilebilir. Bu koordinatlar, Kartezyen koordinat sistemine
\begin{align}
    X &= R \cos(\omega)\sin(\alpha) \label{Sph2Car_x}\\
    Y &= R \cos(\omega)\cos(\alpha) \label{Sph2Car_y}\\
    Z &= R \sin(\omega) \label{Sph2Car_z}
\end{align}
dönüşümü ile aktarılır. Burada $X$, $Y$ ve $Z$ sırasıyla ileri, sola ve yukarı eksenler boyunca konumu temsil etmektedir.

LiDAR sensörleri, stereo kameraya kıyasla çok daha seyrek bir derinlik örneklemesi sunsa da, her bir ölçüm noktasının doğruluğu oldukça yüksektir. Bu özellik, LiDAR verisini stereo derinlik haritalarının iyileştirilmesinde güvenilir \emph{ankraj noktaları} olarak kullanılmaya uygun hâle getirmektedir.

\subsection{IMU, GNSS ve RTK}

Deneysel çalışmalarda, stereo–LiDAR füzyonunun sonuçlarını değerlendirmek ve SLAM altyapısı üzerinde test etmek amacıyla IMU ve GNSS/RTK verilerinden de yararlanılmıştır.

\paragraph*{IMU} (Atalet Ölçüm Birimi), ivmeölçer ve jiroskop bileşenleri ile aracın doğrusal ivmelenmesi ve açısal hızını ölçer. Bu bilgiler, kısa zaman aralıklarında konum ve yönelim değişimlerinin kestirilmesi için kullanılır.

\paragraph*{GNSS} tabanlı konumlandırma sistemleri (GPS, GLONASS, Galileo, BeiDou vb.) geniş alanlarda mutlak konum bilgisi sağlar;

\paragraph*{RTK} ise sabit bir referans istasyonundan alınan diferansiyel düzeltmelerle bu konum bilgisinin santimetre mertebesine kadar hassaslaştırılmasını mümkün kılar. Bu çalışma kapsamındaki mobil sensör düzeneği, hem ulusal TUSAGA-Aktif ağı hem de bölüm bünyesinde kurulan çoklu takımyıldız (GPS, GLONASS, Galileo, BeiDou) destekli RTK istasyonu ile test edilmiştir.

Bu sensörler, doğrudan füzyon algoritmasının girdisi olmaktan ziyade, elde edilen derinlik haritalarının ve SLAM sonuçlarının doğrulanması için referans niteliğinde kullanılmıştır.

\section{Derinlik Algısı ve Stereo–LiDAR Füzyonu}

Otonom sistemlerde derinlik algısının geliştirilmesi için sıklıkla birden fazla sensör bir arada kullanılır. Stereo kameralar sahnenin her pikseli için derinlik tahmini üretebilirken, LiDAR sensörleri sınırlı sayıda ışın doğrultusunda yüksek doğruluklu mesafe ölçümü yapar. Bu iki sensör tipinin tamamlayıcı özellikleri şu şekilde özetlenebilir:

\begin{itemize}
    \item Stereo kamera: Yoğun, yüksek çözünürlüklü fakat gürültülü ve hataya açık derinlik haritası.
    \item LiDAR: Seyrek örneklemeli fakat yüksek güvenilirlikte mutlak derinlik ölçümleri.
\end{itemize}

Literatürde stereo–LiDAR füzyonu için önerilen yöntemlerin önemli bir kısmı, derin sinir ağları kullanarak LiDAR ölçümlerini stereo görüntülerle birleştirmekte ve sonuçta bir ``öğrenilmiş'' derinlik haritası üretmektedir. Bu tür yaklaşımlar yüksek doğruluk sunmakla birlikte, büyük veri kümeleri ile eğitim gerektirmeleri ve görece yüksek hesaplama maliyetleri nedeniyle gerçek zamanlı gömülü sistemlerde her zaman pratik değildir.

Bu tezde ise, herhangi bir eğitim sürecine ihtiyaç duymayan, deterministik ve hesaplama açısından daha hafif bir füzyon yaklaşımı ele alınmaktadır. Önerilen yöntem, stereo derinlik haritasını \emph{yoğun arka plan}, LiDAR ölçümlerini ise \emph{yüksek güvenilirlikli ankraj noktaları} olarak kabul ederek, bu iki veri kaynağını yinelemeli bir iyileştirme süreciyle birleştirir.

\section{Papoulis–Gerchberg Algoritması}

Papoulis–Gerchberg (PG) algoritması, band-sınırlı sinyallerin eksik veya bozulmuş örneklerden yeniden oluştulması için kullanılan yinelemeli bir sinyal işleme yöntemidir. Temel fikir, sinyal üzerinde iki farklı alanda (örneğin zaman/uzay ve frekans alanı) bilinen kısıtların art arda uygulanmasıdır.

Genel olarak algoritma şu iki adımdan oluşur:
\begin{enumerate}
    \item Uzay (veya görüntü) alanında bilinen örneklerin zorlanması (known samples enforcement),
    \item Frekans alanında band-sınırlılık veya benzeri spektral kısıtların uygulanması.
\end{enumerate}

Bu iki adım, $k$ indeksli yinelemeler boyunca yinelenir ve sinyal $\mathbf{x}^{(k)}$ aşağıdaki formda güncellenir:
\begin{equation}
    \mathbf{x}^{(k+1)} = \mathcal{P}_{\text{uzay}}\bigl( \mathcal{F}^{-1} \bigl( \mathcal{P}_{\text{frekans}} ( \mathcal{F}(\mathbf{x}^{(k)}) ) \bigr) \bigr)
\end{equation}
burada $\mathcal{P}_{\text{uzay}}$ uzay alanındaki bilinen örnekleri zorlayan işlemciyi, $\mathcal{P}_{\text{frekans}}$ ise frekans bandı kısıtını temsil eden operatörü, $\mathcal{F}$ ve $\mathcal{F}^{-1}$ ise ileri ve ters Fourier dönüşümlerini göstermektedir. 
% TODO: Bu denklemi kendi notasyonuna göre yeniden yazıp gerekirse alt bileşenlerini aç.

PG algoritmasının iteratif yakınsama davranışı, sezgisel olarak, yalnızca belirli ankraj örnekleri bilinen bir sinyalin bu örneklere ve spektral kısıtlara giderek daha iyi uyum sağlayacak şekilde yeniden şekillenmesi olarak yorumlanabilir. Bu davranış, algoritmanın her iterasyonda bilinen örneklere geri dönmesi ve aynı zamanda global bir bant-sınırlılık varsayımını koruması sayesinde ortaya çıkar. Şekil~\ref{fig:standard_pg_convergence}, bu süreci basitleştirilmiş bir sinyal örneği üzerinden göstermekte; başlangıçta kaba olan tahminin, iterasyonlar ilerledikçe ankraj noktalarla tutarlı ve daha düzgün bir yapıya yakınsadığını ortaya koymaktadır.

\begin{figure}[H]
    \centering
    \begin{adjustbox}{width=\textwidth * 9 / 12}
        \includegraphics{./Figures/standard_pg_convergence.png}
    \end{adjustbox}
    \caption{Standart Papoulis--Gerchberg (PG) algoritmasında iteratif yakınsama davranışı. Turuncu işaretleyiciler ankraj (bilinen) örnekleri göstermektedir. Başlangıç tahmini (iterasyon 0) ankrajlar arasındaki boşluklarda zayıf bir temsil üretirken, her iterasyonda (ör. 1, 2, 5, 12) ankraj tutarlılığı ve bant-sınırlılık kısıtları ardışık olarak uygulanarak sinyal boş bölgelerde giderek daha tutarlı biçimde yeniden inşa edilir ve hedef sinyale yaklaşır.}
    \label{fig:standard_pg_convergence}
\end{figure}

Görüntü tamamlama (image inpainting), süper çözünürlük ve kayıp veri doldurma gibi uygulamalarda PG algoritmasının farklı varyantları kullanılmaktadır.

Bu tezde, algoritma ilk kez \emph{stereo–LiDAR derinlik füzyonu} problemi için uyarlanarak, stereo derinlik haritasının LiDAR ankraj noktaları yardımıyla yinelemeli olarak iyileştirilmesinde kullanılmaktadır.

\pagebreak